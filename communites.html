<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Community Groups</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&family=Courgette&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="communites.css">
</head>
<body>
  <div id="bubble-layer"></div>
  <div id="header-placeholder"></div>
<div class="title-section">
    <h1>Community Groups</h1>
    <p>Connect with others through Facebook group chats</p>
</div>

<input class="search-bar" type="text" placeholder="Search communities..." />

<div class="groups-container">
    <div class="group-card hov">
        <h3>Keep Forsyth County Beautiful</h3>
        <p>Volunteer-driven environmental action focused on litter prevention, recycling, waste reduction, and water quality.</p>
        <div class="members">238 members</div>
        <a class="join-btn dark" href="community-group.html?group=environmental">&#x2197; Join Group</a>
    </div>
    <div class="group-card hov">
        <h3>Forsyth Speaks</h3>
        <p>A local mental health association providing free counseling and support to help the community thrive.</p>
        <div class="members">602 members</div>
        <a class="join-btn dark" href="community-group.html?group=mental">Join Group</a>
    </div>
    <div class="group-card hov">
        <h3>Forsyth AYLUS</h3>
        <p>Youth-led volunteer organization hosting monthly service events including cleanups, drives, and local support.</p>
        <div class="members">842 members</div>
        <a class="join-btn dark" href="community-group.html?group=volunteer">Join Group</a>
    </div>
    <div class="group-card hov">
        <h3>Cumming City Center</h3>
        <p>Community events year-round to connect with neighbors, build friendships, and stay in tune with local activities.</p>
        <div class="members">312 members</div>
        <a class="join-btn dark" href="community-group.html?group=events">Join Group</a>
    </div>
    <div class="group-card hov">
        <h3>The Place</h3>
        <p>A local thrift and donation mission where reused items support families in need and strengthen the community.</p>
        <div class="members">215 members</div>
        <a class="join-btn dark" href="community-group.html?group=donation">Join Group</a>
    </div>
</div>

<footer class="footer" style="margin-top: 100px; width: 100%">
  <div id="footer-placeholder"></div>
</footer>

<script>
  const searchBar = document.querySelector('.search-bar');
  if (searchBar) {
    searchBar.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      const groupCards = document.querySelectorAll('.group-card');
      
      groupCards.forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        const description = card.querySelector('p').textContent.toLowerCase();
        
        if (searchTerm === '' || title.includes(searchTerm) || description.includes(searchTerm)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  }
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBguT9BsQHwsAwAd3mbEmj3S5E7GtR_IBU",
    authDomain: "webmaster-v4-0.firebaseapp.com",
    projectId: "webmaster-v4-0",
    storageBucket: "webmaster-v4-0.firebasestorage.app",
    messagingSenderId: "413556961992",
    appId: "1:413556961992:web:899600895ecb68eb9debfd"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.signOutUser = function() {
    signOut(auth).then(() => {
      location.reload();
    }).catch((error) => {
      console.error('Sign out error:', error);
    });
  };

  onAuthStateChanged(auth, (user) => {
    const avatar = document.querySelector('.avatar');
    const navRight = document.querySelector('.nav-right');
    if (user) {
      const initial = (user.email || '').charAt(0).toUpperCase();
      if (avatar) {
        if (user.photoURL) {
          avatar.style.backgroundImage = `url('${user.photoURL}')`;
          avatar.style.backgroundSize = 'cover';
          avatar.style.backgroundPosition = 'center';
          avatar.textContent = '';
        } else {
          avatar.style.backgroundImage = '';
          avatar.textContent = initial;
        }
        avatar.style.cursor = 'pointer';
        avatar.onclick = () => window.location.href = 'account.html';
      }
      const signInBtn = document.querySelector('.sign-in-btn');
      if (signInBtn) {
        signInBtn.remove();
      }
    } else {
      if (avatar) {
        avatar.textContent = '';
      }
      const signOutBtn = document.querySelector('.sign-out-btn');
      if (signOutBtn) {
        signOutBtn.remove();
      }
      if (navRight && !document.querySelector('.sign-in-btn')) {
        const signInBtn = document.createElement('button');
        signInBtn.textContent = 'Sign In';
        signInBtn.className = 'sign-in-btn';
        signInBtn.style.padding = '8px 16px';
        signInBtn.style.background = 'linear-gradient(to bottom, #4c7dff, #2e63e5)';
        signInBtn.style.color = 'white';
        signInBtn.style.border = 'none';
        signInBtn.style.borderRadius = '999px';
        signInBtn.style.cursor = 'pointer';
        signInBtn.style.fontSize = '14px';
        signInBtn.style.fontWeight = '600';
        signInBtn.style.boxShadow = '0 4px 12px rgba(76, 125, 255, 0.25)';
        signInBtn.style.transition = 'transform 0.1s ease, box-shadow 0.1s ease';
        signInBtn.onclick = () => window.location.href = 'login.html';
        signInBtn.onmouseover = () => {
          signInBtn.style.transform = 'translateY(-1px)';
          signInBtn.style.boxShadow = '0 6px 16px rgba(76, 125, 255, 0.35)';
        };
        signInBtn.onmouseout = () => {
          signInBtn.style.transform = 'translateY(0)';
          signInBtn.style.boxShadow = '0 4px 12px rgba(76, 125, 255, 0.25)';
        };
        navRight.appendChild(signInBtn);
      }
    }
  });
</script>
<script src="bubbles.js"></script>
<script src="bubble-nav.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const footerPlaceholder = document.getElementById('footer-placeholder');
    if (footerPlaceholder) {
      fetch('footer.html')
        .then(response => response.text())
        .then(html => {
          footerPlaceholder.innerHTML = html;
        })
        .catch(error => {
          console.error('Error loading footer:', error);
        });
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const headerPlaceholder = document.getElementById('header-placeholder');
    if (!headerPlaceholder) return;

    fetch('header.html')
      .then(response => response.text())
      .then(html => {
        headerPlaceholder.innerHTML = html;
        const path = window.location.pathname.split('/').pop();
        const links = headerPlaceholder.querySelectorAll('.nav-link');
        links.forEach(link => {
          const href = link.getAttribute('href');
          if (href === path) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
        const hamburger = headerPlaceholder.querySelector('.hamburger');
        const navLinks = headerPlaceholder.querySelector('.nav-links');

        if (hamburger && navLinks) {
          hamburger.addEventListener('click', function (event) {
            event.stopPropagation();
            navLinks.classList.toggle('open');
          });

          document.addEventListener('click', function (event) {
            if (!navLinks.contains(event.target) && !hamburger.contains(event.target)) {
              navLinks.classList.remove('open');
            }
          });
          const navLinkElements = headerPlaceholder.querySelectorAll('.nav-link');
          navLinkElements.forEach(link => {
            link.addEventListener('click', function () {
              navLinks.classList.remove('open');
            });
          });
        }
      })
      .catch(error => {
        console.error('Error loading header:', error);
      });
  });
</script>
<script src="bubble-transition.js"></script>
</body>
</html>
